<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <!-- Meta tags for character set and responsive design -->
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Bootstrap CSS for styling -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

        <title>Srinivasa Refrigeration Works - Complaint register</title>
    </head>
    <body>
        <!-- Heading indicating the complaint status page -->
        <h3>Complaint List</h3> <br>

        <!-- Display a message if no records are found -->
        <p th:if="${noRecordsFound}" th:text="${noRecordsFound}"></p>

        <!-- Display a table if there are complaints available -->
        <div th:if="${complaints}">
            <!-- Table structure for complaint details -->
            <table class="table table-bordered table-striped">
                <!-- Table header row -->
                <thead class="table-dark">
                    <tr>
                        <!-- Table column headers for each complaint attribute -->
                        <th>Complaint ID</th>
                        <th>Customer Name</th>
                        <th>Phone Number</th>
                        <th>Email Address</th>
                        <th>Customer Address</th>
                        <th>Product Type</th>
                        <th>Product Brand</th>
                        <th>Product Model</th>
                        <th>Issue Description</th>
                        <th>Created On</th>
                        <th>Complaint Status</th>
                        <th>Assigned To</th>
                        <th>Closed On</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Loop through complaints and display each record in the table -->
                    <tr th:each="complaint : ${complaints}">
                        <!-- Display each complaint's data in the respective columns -->
                        <td th:text="${complaint.complaintId}"></td>
                        <td th:text="${complaint.customerName}"></td>
                        <td th:text="${complaint.contactNumber}"></td>
                        <td th:text="${complaint.email}"></td>
                        <td th:text="${complaint.address}"></td>
                        <td th:text="${complaint.serviceType}"></td>
                        <td th:text="${complaint.brand}"></td>
                        <td th:text="${complaint.model}"></td>
                        <td th:text="${complaint.description}"></td>
                        <td th:text="${complaint.createdAt}"></td>
                        <td th:text="${complaint.status}"></td>
                        <!-- Display technician info or 'Awaiting Technician' if not assigned -->
                        <td th:text="${complaint.technicianId != null ? complaint.technicianId : 'Awaiting Technician'}"></td>
                        <!-- Display closed date or 'Not Closed Yet' if the complaint isn't closed -->
                        <td th:text="${complaint.closedAt != null ? complaint.closedAt : 'Not Closed Yet'}"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Back to home link -->
        <a th:href="@{/SRW/home}" class="btn btn-danger btn-sm mb-3" title="Return to the homepage">Back to home</a>
    </body>
</html>