<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
        <head>
                <!-- Meta tags for character set and responsive design -->
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
            
                <!-- Bootstrap CSS for responsive design and styling -->
                <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" 
                      rel="stylesheet" 
                      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" 
                      crossorigin="anonymous">
            
                <!-- Custom CSS for specific page styling -->
                <link rel="stylesheet" th:href="@{/css/user-creation-form.css}">
            
                <!-- Title for the web page displayed in the browser tab -->
                <title>Srinivasa Refrigeration Works</title>
        </head>   
        <body>
                <!-- Main heading for the page -->
                <h3>Create an Account</h3>

                <!-- Subheading for registration form -->
                <h4>Register Yourself</h4>

                <!-- Message indicating required fields -->
                <i class="required">All fields are required</i> <br><hr>

                <!-- Form for customer registration -->
                <form th:action="@{/SRW/customer-confirmation}" th:object="${customerCredential}" method="POST">
                        
                        <h4>Enter Your Details</h4> <br>

                        <!-- First Name input field with error handling -->
                        <label for="firstName">First Name:</label>
                        <input type="text" th:field="*{customer.firstName}" id="firstName" placeholder="Enter your first name" >
                        <span th:if="${#fields.hasErrors('customer.firstName')}" th:errors="*{customer.firstName}" class="error"></span> <br><br>

                        <!-- Last Name input field with error handling -->
                        <label for="lastName">Last Name:</label>
                        <input type="text" th:field="*{customer.lastName}" id="lastName" placeholder="Enter your last name" >
                        <span th:if="${#fields.hasErrors('customer.lastName')}" th:errors="*{customer.lastName}" class="error"></span> <br><br>

                        <!-- Phone Number input field with error handling -->
                        <label for="phoneNumber">Phone Number:</label>
                        <input type="text" th:field="*{customer.phoneNumber}" id="phoneNumber" placeholder="Enter your phone number" >
                        <span th:if="${#fields.hasErrors('customer.phoneNumber')}" th:errors="*{customer.phoneNumber}" class="error"></span> <br><br>

                        <!-- Email input field with error handling -->
                        <label for="email">Email:</label>
                        <input type="email" th:field="*{customer.email}" id="email" placeholder="Enter your email" >
                        <span th:if="${#fields.hasErrors('customer.email')}" th:errors="*{customer.email}" class="error"></span> <br><br>

                        <!-- Address input field with error handling -->
                        <label for="address">Address:</label>
                        <input type="text" th:field="*{customer.address}" id="address" placeholder="Enter your address" >
                        <span th:if="${#fields.hasErrors('customer.address')}" th:errors="*{customer.address}" class="error"></span> <br><br> <hr>

                        <!-- Heading for credentials section -->
                        <h4>Enter Your Credentials</h4> <br>

                        <!-- Username input field with error handling -->
                        <label for="username">Username:</label>
                        <input type="text" th:field="*{userCredential.username}" id="username" placeholder="Create your username" >
                        <span th:if="${#fields.hasErrors('userCredential.username')}" th:errors="*{userCredential.username}" class="error"></span><br><br>

                        <!-- Password input field with error handling -->
                        <label for="password">Password:</label>
                        <input type="password" th:field="*{userCredential.password}" id="password" placeholder="Enter your password" >
                        <span th:if="${#fields.hasErrors('userCredential.password')}" th:errors="*{userCredential.password}" class="error"></span> <br><br>

                        <!-- Confirm Password input field with error handling -->
                        <label for="confirmPassword">Confirm Password:</label>
                        <input type="password" th:field="*{userCredential.confirmPassword}" id="confirmPassword" placeholder="Confirm your password" >
                        <span th:if="${#fields.hasErrors('userCredential.confirmPassword')}" th:errors="*{userCredential.confirmPassword}" class="error"></span> <br><br>

                        <!-- Submit button to create the account -->
                        <input type="submit" class="btn btn-primary btn-sm mb-3" value="Create Account"> <br><br>
                </form>

                <!-- Button to navigate back to the home page -->
                <a th:href="@{/SRW/home}" class="btn btn-primary btn-sm mb-3">Back to Home</a>
                
                <!-- Check if user has the role 'OWNER' to display management portal -->
                <div sec:authorize="hasRole('OWNER')">
                        <!-- Button to navigate to management portal -->
                        <a th:href="@{/SRW/management-portal}" class="btn btn-secondary btn-sm mb-3" title="management portal">Back to Management Portal</a>
                </div>
        </body>
</html>
